<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Categor√≠as de Productos</title>

<style>
body{
  margin:0;
  min-height:100vh;
  display:flex;
  flex-direction:column;
  font-family:Arial,sans-serif;
  background:url('../../images/plata.jpeg') no-repeat center center fixed;
  background-size:cover;
  color:#fff;
  overflow-x:hidden;
}

header{
  background:rgba(35,47,62,.95);
  color:#fff;
  padding:12px 20px;
  display:flex;
  justify-content:space-between;
  align-items:center;
  position:sticky;
  top:0;
  z-index:9999;
}

header h1{
  margin:0;
  color:#ffcc00;
  font-size:1.6em;
  text-shadow:0 0 10px #ffcc00;
}

nav a{
  color:#fff;
  text-decoration:none;
  padding:.5em 1em;
  background:#ff007f;
  border-radius:10px;
  margin-left:8px;
}

h2{
  text-align:center;
  margin-top:15px;
}

.contenedor-categorias{
  display:flex;
  flex-wrap:wrap;
  justify-content:center;
  margin:1em;
}

.categoria-btn{
  background:#ff007f;
  color:#fff;
  padding:1em 2em;
  border-radius:16px;
  margin:8px;
  border:none;
  font-weight:bold;
  cursor:pointer;
  font-size:1em;
}

/* ===== VIDEO HORIZONTAL ===== */
.video-wrapper{
  width:100%;
  max-width:1400px;
  margin:15px auto;
  display:none;
}

.video-wrapper video{
  width:100%;
  aspect-ratio:16/9; /* FORZAR HORIZONTAL */
  object-fit:cover;
  border-radius:14px;
  box-shadow:0 6px 20px rgba(0,0,0,.5);
}

#productos-lista{
  display:grid;
  gap:1.2em;
  padding:1.2em;
}

@media(min-width:1200px){
  #productos-lista{grid-template-columns:repeat(4,1fr);}
}
@media(max-width:1199px){
  #productos-lista{grid-template-columns:repeat(2,1fr);}
}
@media(max-width:600px){
  #productos-lista{grid-template-columns:1fr;}
}

.producto{
  background:rgba(255,255,255,.9);
  padding:1em;
  border-radius:12px;
  text-align:center;
  color:#000;
}

.producto img{
  width:100%;
  height:170px;
  object-fit:cover;
  border-radius:10px;
}

.boton-descripcion{
  display:block;
  margin-top:10px;
  padding:.6em;
  background:#ff5722;
  color:#fff;
  border-radius:8px;
  text-decoration:none;
  font-weight:bold;
}

footer{
  background:rgba(35,47,62,.95);
  color:#fff;
  padding:1em;
  text-align:center;
  margin-top:auto;
}
</style>
</head>

<body>

<header>
  <h1>DRANGILS MORALES</h1>
  <nav>
    <a href="../../index.html">Inicio</a>
    <a href="../../opciones/contactogeneral1.html">Contacto</a>
    <a href="../../opciones/vercarrito.html">Carrito</a>
  </nav>
</header>

<h2 id="titulo-principal">Categor√≠as de Productos</h2>

<div class="contenedor-categorias" id="categoria-container"></div>

<!-- VIDEO HORIZONTAL -->
<div class="video-wrapper" id="videoWrapper">
  <video id="video-anuncio" autoplay muted playsinline></video>
</div>

<h2 id="titulo-cat" style="display:none;"></h2>

<div id="productos-lista"></div>

<footer>¬© 2025 DRANGILS MORALES</footer>

<script>
/* ======================================================
   JSON DESDE GITHUB - NO TOCAR
====================================================== */
const URL_JSON =
"https://raw.githubusercontent.com/luismorales2025/APP_2025_DRANGILSMORS./main/data/products.json";

/* ======================================================
   VIDEOS POR CATEGOR√çA
   üëâ EL NOMBRE DEBE SER IGUAL AL "category" DEL JSON
====================================================== */
const videosCategorias = {

  // category: "catalogos"
  catalogos: "../../anunciol.mp4",

  // category: "ropa"
  ropa: "../../anuncio2.mp4",

  // category: "accesorios"
  accesorios: "../../anunciol.mp4",

  // category: "calzado"
  calzado: "../../anuncio2.mp4"

};

let productos = [];

/* ======================================================
   CARGAR CATEGOR√çAS DESDE JSON
====================================================== */
fetch(URL_JSON)
  .then(r => r.json())
  .then(data => {
    productos = data;

    const categorias = [...new Set(data.map(p => p.category))];

    document.getElementById("categoria-container").innerHTML =
      categorias.map(cat =>
        `<button class="categoria-btn" onclick="mostrarCategoria('${cat}')">
          ${cat}
        </button>`
      ).join("");
  });

/* ======================================================
   MOSTRAR CATEGOR√çA + VIDEO
====================================================== */
function mostrarCategoria(cat){
  const video = document.getElementById("video-anuncio");
  const wrapper = document.getElementById("videoWrapper");
  const lista = document.getElementById("productos-lista");
  const titulo = document.getElementById("titulo-cat");

  titulo.style.display = "block";
  titulo.textContent = "Categor√≠a: " + cat;
  lista.innerHTML = "";

  /* VIDEO */
  if(videosCategorias[cat]){
    video.src = videosCategorias[cat];
    wrapper.style.display = "block";
    video.currentTime = 0;
    video.play();
  }else{
    wrapper.style.display = "none";
  }

  /* PRODUCTOS */
  lista.innerHTML = productos
    .filter(p => p.category === cat)
    .map(p => `
      <div class="producto">
        <img src="${p.image}">
        <h3>${p.title}</h3>
        <p><b>Q${p.price}</b></p>
        <a class="boton-descripcion"
           href="../../opciones/descripcion.html?id=${p.id}">
           Ver descripci√≥n
        </a>
      </div>
    `).join("");
}
</script>

</body>
</html>

